<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>tclap: DocBookOutput.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">tclap</a></div>
<h1>DocBookOutput.h</h1><a href="DocBookOutput_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 
00002 <span class="comment">/****************************************************************************** </span>
00003 <span class="comment"> * </span>
00004 <span class="comment"> *  file:  DocBookOutput.h</span>
00005 <span class="comment"> * </span>
00006 <span class="comment"> *  Copyright (c) 2004, Michael E. Smoot</span>
00007 <span class="comment"> *  All rights reverved.</span>
00008 <span class="comment"> * </span>
00009 <span class="comment"> *  See the file COPYING in the top directory of this distribution for</span>
00010 <span class="comment"> *  more information.</span>
00011 <span class="comment"> *  </span>
00012 <span class="comment"> *  THE SOFTWARE IS PROVIDED _AS IS_, WITHOUT WARRANTY OF ANY KIND, EXPRESS </span>
00013 <span class="comment"> *  OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, </span>
00014 <span class="comment"> *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL </span>
00015 <span class="comment"> *  THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER </span>
00016 <span class="comment"> *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING </span>
00017 <span class="comment"> *  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER </span>
00018 <span class="comment"> *  DEALINGS IN THE SOFTWARE.  </span>
00019 <span class="comment"> *  </span>
00020 <span class="comment"> *****************************************************************************/</span> 
00021 
00022 <span class="preprocessor">#ifndef TCLAP_DOCBOOKOUTPUT_H</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#define TCLAP_DOCBOOKOUTPUT_H</span>
00024 <span class="preprocessor"></span>
00025 <span class="preprocessor">#include &lt;string&gt;</span>
00026 <span class="preprocessor">#include &lt;vector&gt;</span>
00027 <span class="preprocessor">#include &lt;list&gt;</span>
00028 <span class="preprocessor">#include &lt;iostream&gt;</span>
00029 <span class="preprocessor">#include &lt;algorithm&gt;</span>
00030 
00031 <span class="preprocessor">#include &lt;<a class="code" href="CmdLineInterface_8h.html">tclap/CmdLineInterface.h</a>&gt;</span>
00032 <span class="preprocessor">#include &lt;<a class="code" href="CmdLineOutput_8h.html">tclap/CmdLineOutput.h</a>&gt;</span>
00033 <span class="preprocessor">#include &lt;<a class="code" href="XorHandler_8h.html">tclap/XorHandler.h</a>&gt;</span>
00034 <span class="preprocessor">#include &lt;<a class="code" href="Arg_8h.html">tclap/Arg.h</a>&gt;</span>
00035 
00036 <span class="keyword">namespace </span>TCLAP {
00037 
<a name="l00042"></a><a class="code" href="classTCLAP_1_1DocBookOutput.html">00042</a> <span class="keyword">class </span><a class="code" href="classTCLAP_1_1DocBookOutput.html">DocBookOutput</a> : <span class="keyword">public</span> <a class="code" href="classTCLAP_1_1CmdLineOutput.html">CmdLineOutput</a>
00043 {
00044 
00045     <span class="keyword">public</span>:
00046 
00052         <span class="keyword">virtual</span> <span class="keywordtype">void</span> usage(<a class="code" href="classTCLAP_1_1CmdLineInterface.html">CmdLineInterface</a>&amp; c);
00053 
00059         <span class="keyword">virtual</span> <span class="keywordtype">void</span> version(<a class="code" href="classTCLAP_1_1CmdLineInterface.html">CmdLineInterface</a>&amp; c);
00060 
00067         <span class="keyword">virtual</span> <span class="keywordtype">void</span> failure(<a class="code" href="classTCLAP_1_1CmdLineInterface.html">CmdLineInterface</a>&amp; c, 
00068                              <a class="code" href="classTCLAP_1_1ArgException.html">ArgException</a>&amp; e );
00069 
00070     <span class="keyword">protected</span>:
00071 
00078         <span class="keywordtype">void</span> substituteSpecialChars( std::string&amp; s, <span class="keywordtype">char</span> r, std::string&amp; x );
00079         <span class="keywordtype">void</span> removeChar( std::string&amp; s, <span class="keywordtype">char</span> r);
00080 
00081         <span class="keywordtype">void</span> printShortArg(<a class="code" href="classTCLAP_1_1Arg.html">Arg</a>* it);
00082         <span class="keywordtype">void</span> printLongArg(<a class="code" href="classTCLAP_1_1Arg.html">Arg</a>* it);
00083 };
00084 
00085 
<a name="l00086"></a><a class="code" href="classTCLAP_1_1DocBookOutput.html#a1">00086</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> DocBookOutput::version(<a class="code" href="classTCLAP_1_1CmdLineInterface.html">CmdLineInterface</a>&amp; _cmd) 
00087 { 
00088     std::cout &lt;&lt; _cmd.<a class="code" href="classTCLAP_1_1CmdLineInterface.html#a8">getVersion</a>() &lt;&lt; std::endl;
00089 }
00090 
<a name="l00091"></a><a class="code" href="classTCLAP_1_1DocBookOutput.html#a0">00091</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> DocBookOutput::usage(<a class="code" href="classTCLAP_1_1CmdLineInterface.html">CmdLineInterface</a>&amp; _cmd ) 
00092 {
00093     std::list&lt;Arg*&gt; argList = _cmd.<a class="code" href="classTCLAP_1_1CmdLineInterface.html#a10">getArgList</a>();
00094     std::string progName = _cmd.<a class="code" href="classTCLAP_1_1CmdLineInterface.html#a9">getProgramName</a>();
00095     std::string <a class="code" href="classTCLAP_1_1DocBookOutput.html#a1">version</a> = _cmd.<a class="code" href="classTCLAP_1_1CmdLineInterface.html#a8">getVersion</a>();
00096     <a class="code" href="classTCLAP_1_1XorHandler.html">XorHandler</a> xorHandler = _cmd.<a class="code" href="classTCLAP_1_1CmdLineInterface.html#a11">getXorHandler</a>();
00097     std::vector&lt; std::vector&lt;Arg*&gt; &gt; xorList = xorHandler.<a class="code" href="classTCLAP_1_1XorHandler.html#a6">getXorList</a>();
00098 
00099 
00100     std::cout &lt;&lt; <span class="stringliteral">"&lt;?xml version='1.0'?&gt;"</span> &lt;&lt; std::endl;
00101     std::cout &lt;&lt; <span class="stringliteral">"&lt;!DOCTYPE book PUBLIC \"-//Norman Walsh//DTD DocBk XML V4.2//EN\""</span> &lt;&lt; std::endl;
00102     std::cout &lt;&lt; <span class="stringliteral">"\t\"http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd\"&gt;"</span> &lt;&lt; std::endl &lt;&lt; std::endl;
00103 
00104     std::cout &lt;&lt; <span class="stringliteral">"&lt;book&gt;"</span> &lt;&lt; std::endl;
00105     std::cout &lt;&lt; <span class="stringliteral">"&lt;refentry&gt;"</span> &lt;&lt; std::endl;
00106 
00107     std::cout &lt;&lt; <span class="stringliteral">"&lt;refmeta&gt;"</span> &lt;&lt; std::endl;
00108     std::cout &lt;&lt; <span class="stringliteral">"&lt;refentrytitle&gt;"</span> &lt;&lt; std::endl;
00109     std::cout &lt;&lt; progName &lt;&lt; std::endl; 
00110     std::cout &lt;&lt; <span class="stringliteral">"&lt;/refentrytitle&gt;"</span> &lt;&lt; std::endl;
00111     std::cout &lt;&lt; <span class="stringliteral">"&lt;manvolnum&gt;1&lt;/manvolnum&gt;"</span> &lt;&lt; std::endl;
00112     std::cout &lt;&lt; <span class="stringliteral">"&lt;/refmeta&gt;"</span> &lt;&lt; std::endl;
00113 
00114     std::cout &lt;&lt; <span class="stringliteral">"&lt;refnamediv&gt;"</span> &lt;&lt; std::endl;
00115     std::cout &lt;&lt; <span class="stringliteral">"&lt;refname&gt;"</span> &lt;&lt; std::endl;
00116     std::cout &lt;&lt; progName &lt;&lt; std::endl; 
00117     std::cout &lt;&lt; <span class="stringliteral">"&lt;/refname&gt;"</span> &lt;&lt; std::endl;
00118     std::cout &lt;&lt; <span class="stringliteral">"&lt;/refnamediv&gt;"</span> &lt;&lt; std::endl;
00119 
00120     std::cout &lt;&lt; <span class="stringliteral">"&lt;cmdsynopsis&gt;"</span> &lt;&lt; std::endl;
00121 
00122     std::cout &lt;&lt; <span class="stringliteral">"&lt;command&gt;"</span> &lt;&lt; progName &lt;&lt; <span class="stringliteral">"&lt;/command&gt;"</span> &lt;&lt; std::endl;
00123 
00124     <span class="comment">// xor</span>
00125     <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; (<span class="keywordtype">unsigned</span> int)i &lt; xorList.size(); i++ )
00126     {
00127         std::cout &lt;&lt; <span class="stringliteral">"&lt;group choice='req'&gt;"</span> &lt;&lt; std::endl;
00128         <span class="keywordflow">for</span> ( <a class="code" href="namespaceTCLAP.html#a1">ArgVectorIterator</a> it = xorList[i].begin(); 
00129                         it != xorList[i].end(); it++ )
00130             <a class="code" href="classTCLAP_1_1DocBookOutput.html#b2">printShortArg</a>((*it));
00131 
00132         std::cout &lt;&lt; <span class="stringliteral">"&lt;/group&gt;"</span> &lt;&lt; std::endl;
00133     }
00134     
00135     <span class="comment">// rest of args</span>
00136     <span class="keywordflow">for</span> (<a class="code" href="namespaceTCLAP.html#a0">ArgListIterator</a> it = argList.begin(); it != argList.end(); it++)
00137         <span class="keywordflow">if</span> ( !xorHandler.<a class="code" href="classTCLAP_1_1XorHandler.html#a5">contains</a>( (*it) ) )
00138             <a class="code" href="classTCLAP_1_1DocBookOutput.html#b2">printShortArg</a>((*it));
00139 
00140     std::cout &lt;&lt; <span class="stringliteral">"&lt;/cmdsynopsis&gt;"</span> &lt;&lt; std::endl;
00141 
00142     std::cout &lt;&lt; <span class="stringliteral">"&lt;refsect1&gt;"</span> &lt;&lt; std::endl;
00143     std::cout &lt;&lt; <span class="stringliteral">"&lt;title&gt;Description&lt;/title&gt;"</span> &lt;&lt; std::endl;
00144     std::cout &lt;&lt; <span class="stringliteral">"&lt;para&gt;"</span> &lt;&lt; std::endl;
00145     std::cout &lt;&lt; _cmd.<a class="code" href="classTCLAP_1_1CmdLineInterface.html#a13">getMessage</a>() &lt;&lt; std::endl; 
00146     std::cout &lt;&lt; <span class="stringliteral">"&lt;/para&gt;"</span> &lt;&lt; std::endl;
00147     std::cout &lt;&lt; <span class="stringliteral">"&lt;/refsect1&gt;"</span> &lt;&lt; std::endl;
00148 
00149     std::cout &lt;&lt; <span class="stringliteral">"&lt;refsect1&gt;"</span> &lt;&lt; std::endl;
00150     std::cout &lt;&lt; <span class="stringliteral">"&lt;title&gt;Options&lt;/title&gt;"</span> &lt;&lt; std::endl;
00151     std::cout &lt;&lt; <span class="stringliteral">"&lt;para&gt;"</span> &lt;&lt; std::endl;
00152     std::cout &lt;&lt; <span class="stringliteral">"&lt;itemizedlist&gt;"</span> &lt;&lt; std::endl;
00153     <span class="comment">// xor</span>
00154     <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; (<span class="keywordtype">unsigned</span> int)i &lt; xorList.size(); i++ )
00155     {
00156         std::cout &lt;&lt; <span class="stringliteral">"&lt;itemizedlist&gt;"</span> &lt;&lt; std::endl;
00157         size_t xlen = xorList.size() - 1;
00158         size_t xcount = 0; 
00159         <span class="keywordflow">for</span> ( <a class="code" href="namespaceTCLAP.html#a1">ArgVectorIterator</a> it = xorList[i].begin(); 
00160                         it != xorList[i].end(); it++, xcount++ )
00161         {
00162             <a class="code" href="classTCLAP_1_1DocBookOutput.html#b3">printLongArg</a>((*it));
00163             <span class="keywordflow">if</span> ( xcount &lt; xlen )
00164                 std::cout &lt;&lt; <span class="stringliteral">"&lt;listitem&gt;OR&lt;/listitem&gt;"</span> &lt;&lt; std::endl;
00165         }
00166 
00167         std::cout &lt;&lt; <span class="stringliteral">"&lt;/itemizedlist&gt;"</span> &lt;&lt; std::endl;
00168     }
00169     
00170     <span class="comment">// rest of args</span>
00171     <span class="keywordflow">for</span> (<a class="code" href="namespaceTCLAP.html#a0">ArgListIterator</a> it = argList.begin(); it != argList.end(); it++)
00172         <span class="keywordflow">if</span> ( !xorHandler.<a class="code" href="classTCLAP_1_1XorHandler.html#a5">contains</a>( (*it) ) )
00173             <a class="code" href="classTCLAP_1_1DocBookOutput.html#b3">printLongArg</a>((*it));
00174 
00175     std::cout &lt;&lt; <span class="stringliteral">"&lt;/itemizedlist&gt;"</span> &lt;&lt; std::endl;
00176     std::cout &lt;&lt; <span class="stringliteral">"&lt;/para&gt;"</span> &lt;&lt; std::endl;
00177     std::cout &lt;&lt; <span class="stringliteral">"&lt;/refsect1&gt;"</span> &lt;&lt; std::endl;
00178 
00179     std::cout &lt;&lt; <span class="stringliteral">"&lt;refsect1&gt;"</span> &lt;&lt; std::endl;
00180     std::cout &lt;&lt; <span class="stringliteral">"&lt;title&gt;Version&lt;/title&gt;"</span> &lt;&lt; std::endl;
00181     std::cout &lt;&lt; <span class="stringliteral">"&lt;para&gt;"</span> &lt;&lt; std::endl;
00182     std::cout &lt;&lt; version &lt;&lt; std::endl; 
00183     std::cout &lt;&lt; <span class="stringliteral">"&lt;/para&gt;"</span> &lt;&lt; std::endl;
00184     std::cout &lt;&lt; <span class="stringliteral">"&lt;/refsect1&gt;"</span> &lt;&lt; std::endl;
00185     
00186     std::cout &lt;&lt; <span class="stringliteral">"&lt;/refentry&gt;"</span> &lt;&lt; std::endl;
00187     std::cout &lt;&lt; <span class="stringliteral">"&lt;/book&gt;"</span> &lt;&lt; std::endl;
00188 
00189 }
00190 
<a name="l00191"></a><a class="code" href="classTCLAP_1_1DocBookOutput.html#a2">00191</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> DocBookOutput::failure( <a class="code" href="classTCLAP_1_1CmdLineInterface.html">CmdLineInterface</a>&amp; _cmd,
00192                                 <a class="code" href="classTCLAP_1_1ArgException.html">ArgException</a>&amp; e ) 
00193 { 
00194         std::cout &lt;&lt; e.<a class="code" href="classTCLAP_1_1ArgException.html#a4">what</a>() &lt;&lt; std::endl;
00195 }
00196 
<a name="l00197"></a><a class="code" href="classTCLAP_1_1DocBookOutput.html#b0">00197</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> DocBookOutput::substituteSpecialChars( std::string&amp; s,
00198                                                    <span class="keywordtype">char</span> r,
00199                                                    std::string&amp; x )
00200 {
00201     size_t p;
00202     <span class="keywordflow">while</span> ( (p = s.find_first_of(r)) != std::string::npos )
00203     {
00204         s.erase(p,1);
00205         s.insert(p,x);
00206     }
00207 }
00208 
<a name="l00209"></a><a class="code" href="classTCLAP_1_1DocBookOutput.html#b1">00209</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> DocBookOutput::removeChar( std::string&amp; s, <span class="keywordtype">char</span> r)
00210 {
00211     size_t p;
00212     <span class="keywordflow">while</span> ( (p = s.find_first_of(r)) != std::string::npos )
00213     {
00214         s.erase(p,1);
00215     }
00216 }
00217 
<a name="l00218"></a><a class="code" href="classTCLAP_1_1DocBookOutput.html#b2">00218</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> DocBookOutput::printShortArg(<a class="code" href="classTCLAP_1_1Arg.html">Arg</a>* a)
00219 {
00220     std::string lt = <span class="stringliteral">"&amp;lt;"</span>; 
00221     std::string gt = <span class="stringliteral">"&amp;gt;"</span>; 
00222 
00223     std::string <span class="keywordtype">id</span> = a-&gt;<a class="code" href="classTCLAP_1_1Arg.html#a15">shortID</a>();
00224     <a class="code" href="classTCLAP_1_1DocBookOutput.html#b0">substituteSpecialChars</a>(<span class="keywordtype">id</span>,<span class="charliteral">'&lt;'</span>,lt);
00225     <a class="code" href="classTCLAP_1_1DocBookOutput.html#b0">substituteSpecialChars</a>(<span class="keywordtype">id</span>,<span class="charliteral">'&gt;'</span>,gt);
00226     <a class="code" href="classTCLAP_1_1DocBookOutput.html#b1">removeChar</a>(<span class="keywordtype">id</span>,<span class="charliteral">'['</span>);
00227     <a class="code" href="classTCLAP_1_1DocBookOutput.html#b1">removeChar</a>(<span class="keywordtype">id</span>,<span class="charliteral">']'</span>);
00228     
00229     std::string choice = <span class="stringliteral">"opt"</span>;
00230     <span class="keywordflow">if</span> ( a-&gt;<a class="code" href="classTCLAP_1_1Arg.html#a7">isRequired</a>() )
00231         choice = <span class="stringliteral">"req"</span>;
00232 
00233     std::string repeat = <span class="stringliteral">"norepeat"</span>;
00234     <span class="keywordflow">if</span> ( a-&gt;<a class="code" href="classTCLAP_1_1Arg.html#a21">acceptsMultipleValues</a>() )
00235         repeat = <span class="stringliteral">"repeat"</span>;
00236 
00237         
00238                 
00239     std::cout &lt;&lt; <span class="stringliteral">"&lt;arg choice='"</span> &lt;&lt; choice 
00240               &lt;&lt; <span class="stringliteral">"' repeat='"</span> &lt;&lt; repeat &lt;&lt; <span class="stringliteral">"'&gt;"</span> 
00241               &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">"&lt;/arg&gt;"</span> &lt;&lt; std::endl; 
00242 
00243 }
00244 
<a name="l00245"></a><a class="code" href="classTCLAP_1_1DocBookOutput.html#b3">00245</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> DocBookOutput::printLongArg(<a class="code" href="classTCLAP_1_1Arg.html">Arg</a>* a)
00246 {
00247     std::string lt = <span class="stringliteral">"&amp;lt;"</span>; 
00248     std::string gt = <span class="stringliteral">"&amp;gt;"</span>; 
00249 
00250     std::string <span class="keywordtype">id</span> = a-&gt;<a class="code" href="classTCLAP_1_1Arg.html#a16">longID</a>();
00251     <a class="code" href="classTCLAP_1_1DocBookOutput.html#b0">substituteSpecialChars</a>(<span class="keywordtype">id</span>,<span class="charliteral">'&lt;'</span>,lt);
00252     <a class="code" href="classTCLAP_1_1DocBookOutput.html#b0">substituteSpecialChars</a>(<span class="keywordtype">id</span>,<span class="charliteral">'&gt;'</span>,gt);
00253     <a class="code" href="classTCLAP_1_1DocBookOutput.html#b1">removeChar</a>(<span class="keywordtype">id</span>,<span class="charliteral">'['</span>);
00254     <a class="code" href="classTCLAP_1_1DocBookOutput.html#b1">removeChar</a>(<span class="keywordtype">id</span>,<span class="charliteral">']'</span>);
00255 
00256     std::string desc = a-&gt;<a class="code" href="classTCLAP_1_1Arg.html#a6">getDescription</a>();
00257     <a class="code" href="classTCLAP_1_1DocBookOutput.html#b0">substituteSpecialChars</a>(desc,<span class="charliteral">'&lt;'</span>,lt);
00258     <a class="code" href="classTCLAP_1_1DocBookOutput.html#b0">substituteSpecialChars</a>(desc,<span class="charliteral">'&gt;'</span>,gt);
00259 
00260     std::cout &lt;&lt; <span class="stringliteral">"&lt;simplelist&gt;"</span> &lt;&lt; std::endl;
00261 
00262     std::cout &lt;&lt; <span class="stringliteral">"&lt;member&gt;"</span> &lt;&lt; std::endl;
00263     std::cout &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; std::endl;
00264     std::cout &lt;&lt; <span class="stringliteral">"&lt;/member&gt;"</span> &lt;&lt; std::endl;
00265 
00266     std::cout &lt;&lt; <span class="stringliteral">"&lt;member&gt;"</span> &lt;&lt; std::endl;
00267     std::cout &lt;&lt; desc &lt;&lt; std::endl;
00268     std::cout &lt;&lt; <span class="stringliteral">"&lt;/member&gt;"</span> &lt;&lt; std::endl;
00269 
00270     std::cout &lt;&lt; <span class="stringliteral">"&lt;/simplelist&gt;"</span> &lt;&lt; std::endl;
00271 }
00272 
00273 } <span class="comment">//namespace TCLAP</span>
00274 <span class="preprocessor">#endif </span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jul 7 17:11:24 2009 for tclap by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
